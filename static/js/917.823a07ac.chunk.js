"use strict";(self.webpackChunk_1_project=self.webpackChunk_1_project||[]).push([[917],{5917:function(s,t,e){e.r(t),e.d(t,{default:function(){return V}});var n=e(8683),r=e(5671),o=e(3144),i=e(136),a=e(516),u=e(2791),l="Profile_content__njilw",c=e(9439),d=e(8992),p="ProfileInfo_descriptionBlock__AO4M2",f="ProfileInfo_profileStatus__j6o9c",h="ProfileInfo_contactItem__AP9ai",j=e(8478),m=e(184),x=function(s){var t=(0,u.useState)(!1),e=(0,c.Z)(t,2),n=e[0],r=e[1],o=(0,u.useState)(s.status),i=(0,c.Z)(o,2),a=i[0],l=i[1];(0,u.useEffect)((function(){l(s.status)}),[s.status]);return(0,m.jsx)("div",{children:n?(0,m.jsx)("div",{children:(0,m.jsx)("input",{autoFocus:!0,onBlur:function(){r(!1),s.updateUserStatus(a)},value:a,onChange:function(s){l(s.currentTarget.value)}})}):(0,m.jsx)("div",{children:(0,m.jsx)("span",{className:f,onDoubleClick:function(){r(!0)},children:s.status||"-------"})})})},v=function(s){var t=s.contactTitle,e=s.contactValue;return(0,m.jsxs)("div",{className:h,children:[t,": ",e]})},P=function(s){var t=s.profile,e=s.isOwner,n=s.activateEditMode;return(0,m.jsxs)("div",{children:[e?(0,m.jsx)("button",{onClick:n,children:"Edit"}):null,(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["Full name: ",t.fullName]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["About me: ",t.aboutMe]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["Looking for a job: ",t.lookingForAJob?"yes":"no"]})}),t.lookingForAJob?(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["My professional skills: ",t.lookingForAJobDescription]})}):null,(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["Contacts: ",Object.keys(t.contacts).map((function(s){return(0,m.jsx)(v,{contactTitle:s,contactValue:t.contacts[s]},s)}))]})})]})},g=e(1595),S=e(704),b=e(9058),k=(0,S.Z)({form:"profile-form"})((function(s){var t=s.handleSubmit,e=s.profile,n=s.error;s.editModeStatus;return(0,m.jsxs)("form",{onSubmit:t,children:[(0,m.jsx)("button",{children:"Save"}),n?(0,m.jsx)("div",{className:b.Z.formErrorSummary,children:n}):null,(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Full name:"}),(0,g.Gr)(g.II,"Full name","fullName",[])]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"About me:"}),(0,g.Gr)(g.gx,"About me","aboutMe",[])]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Looking for a job:"}),(0,g.Gr)(g.II,"","lookingForAJob",[],{type:"checkbox"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"My professional skills:"}),(0,g.Gr)(g.gx,"My professional skills","lookingForAJobDescription",[])]}),(0,m.jsx)("div",{children:(0,m.jsxs)("span",{children:["Contacts: ",Object.keys(e.contacts).map((function(s){return(0,m.jsxs)("div",{className:h,children:[(0,m.jsx)("span",{children:s}),(0,g.Gr)(g.II,s,"contacts."+s,[])]},s)}))]})})]})})),_=function(s){var t=s.profile,e=s.status,n=s.updateUserStatus,r=s.isOwner,o=s.savePhoto,i=s.saveProfileFormData,a=s.editModeStatus,l=(0,u.useState)(!1),f=(0,c.Z)(l,2),h=f[0],v=f[1];return t?(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:p,children:[(0,m.jsx)("img",{src:t.photos.large||j,alt:"user-avatar"}),r?(0,m.jsx)("input",{type:"file",onChange:function(s){s.target.files.length&&o(s.target.files[0])}}):null,(0,m.jsx)(x,{status:e,updateUserStatus:n}),h?(0,m.jsx)(k,{initialValues:t,onSubmit:function(s){i(s),"SUCCESS"===a&&v(!1)},profile:t,editModeStatus:a}):(0,m.jsx)(P,{profile:t,isOwner:r,activateEditMode:function(){v(!0)}})]})}):(0,m.jsx)(d.Z,{})},y="Post_item__wd+99",M=function(s){return(0,m.jsxs)("div",{className:y,children:[(0,m.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSY4JmSLi5dZYfNLYBW-LtPGbN4W571XtNMVQ&usqp=CAU",alt:"avatar"}),(0,m.jsx)("span",{children:s.message}),(0,m.jsxs)("span",{children:["likes ",s.likesCount]})]})},Z="MyPosts_postsBlock__Tyn6L",A="MyPosts_writePost__YGPfE",C="MyPosts_posts__W1RuA",I=e(6139),U=e(5304),F=(0,U.BS)(15),N=(0,S.Z)({form:"post"})((function(s){return(0,m.jsxs)("form",{onSubmit:s.handleSubmit,className:A,children:[(0,m.jsx)(I.Z,{component:g.gx,name:"newPost",validate:[U.C1,F],placeholder:"Post message"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("button",{children:"Add Post"}),(0,m.jsx)("button",{children:"Remove Post"})]})]})})),w=function(s){var t=s.profilePage.posts.map((function(s){return(0,m.jsx)(M,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)(N,{onSubmit:function(t){s.addPost(t.newPost)}}),(0,m.jsx)("div",{className:C,children:t})]})},D=u.memo(w),O=e(6070),E=e(8687),G=(0,E.$j)((function(s){return{profilePage:s.profilePage}}),(function(s){return{addPost:function(t){s((0,O.WA)(t))}}}))(D),J=function(s){return(0,m.jsxs)("div",{className:l,children:[(0,m.jsx)(_,{profile:s.profile,status:s.status,updateUserStatus:s.updateUserStatus,isOwner:s.isOwner,savePhoto:s.savePhoto,saveProfileFormData:s.saveProfileFormData,editModeStatus:s.editModeStatus}),(0,m.jsx)(G,{})]})},L=e(3636),B=e(7781),T=e(4776),q=function(s){(0,i.Z)(e,s);var t=(0,a.Z)(e);function e(){return(0,r.Z)(this,e),t.apply(this,arguments)}return(0,o.Z)(e,[{key:"refreshProfile",value:function(){var s=this.props.params.userId;null==s&&((s=this.props.authorizedUserId)||this.props.history.push("/login")),this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,t){this.props.params.userId!==s.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,m.jsx)(J,(0,n.Z)((0,n.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,isOwner:!this.props.params.userId,savePhoto:this.props.savePhoto,saveProfileFormData:this.props.saveProfileFormData,editModeStatus:this.props.editModeStatus}))}}]),e}(u.Component),V=(0,B.qC)((0,E.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth,editModeStatus:s.profilePage.editModeStatus}}),{getUserProfile:O.et,getUserStatus:O.Tq,updateUserStatus:O.OL,savePhoto:O.Ju,saveProfileFormData:O.od}),T.E,L.Z)(q)},3636:function(s,t,e){var n=e(8683),r=e(5671),o=e(3144),i=e(136),a=e(516),u=e(2791),l=e(7689),c=e(8687),d=e(184),p=function(s){return{isAuth:s.auth.isAuth}};t.Z=function(s){var t=function(t){(0,i.Z)(u,t);var e=(0,a.Z)(u);function u(){return(0,r.Z)(this,u),e.apply(this,arguments)}return(0,o.Z)(u,[{key:"render",value:function(){return this.props.isAuth?(0,d.jsx)(s,(0,n.Z)({},this.props)):(0,d.jsx)(l.Fg,{to:"/login"})}}]),u}(u.Component);return(0,c.$j)(p)(t)}}}]);
//# sourceMappingURL=917.823a07ac.chunk.js.map